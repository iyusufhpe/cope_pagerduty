# -------------- * --------------


# Read Incidents
Table is already created for incidents for data ranging from September 2023 to September 2024

## Try to find some fields
Prabhu wants to find the following keywords in "description" field of Incidents data.

> Runbooks, rndwiki , github

- Let us find **Runbook** keyword first
```sql 
SELECT count(*) FROM incidents
WHERE description ILIKE '%Runbooks%'
;

┌──────────────┐
│ count_star() │
│    int64     │
├──────────────┤
│           19 │
└──────────────┘
```

- Let us find **rndwiki** keyword first
```sql 
SELECT count(*) FROM incidents
WHERE description ILIKE '%rndwiki%'
;

┌──────────────┐
│ count_star() │
│    int64     │
├──────────────┤
│          250 │
└──────────────┘
```

- Let us find **github** keyword first
```sql 
SELECT count(*) FROM incidents
WHERE description ILIKE '%github%'

┌──────────────┐
│ count_star() │
│    int64     │
├──────────────┤
│          795 │
└──────────────┘
;
```

## Get a csv out with some important fields

- incidents_with_RUNBOOK.csv
```sql
COPY (
    SELECT id,incident_number,description, created_at, priority_name,status,service_name,team_name
    FROM incidents
    WHERE description ILIKE '%Runbooks%'
) TO 'incidents_with_RUNBOOK.csv' 
 WITH (FORMAT CSV, HEADER TRUE)
 ;
```

- rndwiki
```sql
COPY (
    SELECT id,incident_number,description, created_at, priority_name,status,service_name,team_name
    FROM incidents
    WHERE description ILIKE '%rndwiki%'
) TO 'incidents_with_rndwiki.csv' 
 WITH (FORMAT CSV, HEADER TRUE)
 ;
```

- github
```sql
COPY (
    SELECT id,incident_number,description, created_at, priority_name,status,service_name,team_name
    FROM incidents
    WHERE description ILIKE '%github%'
) TO 'incidents_with_github.csv' 
 WITH (FORMAT CSV, HEADER TRUE)
 ;
```




# -------------- * --------------

# Reading Alerts (new)

## Create alerts table for 1,500 alerts

### Input
```sql
CREATE TABLE alerts_sample AS
SELECT * 
FROM read_json_auto('incidents_alerts_tester.json');
```

